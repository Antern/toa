# Implementation

## Questions

- Where are values comes from?
- Is there a configuration service or configuration component?
- Where are configuration values being stored?
- Where are secrets being stored and how do they resolve to value?

## Options

### Common

- Secrets are being deployed separately by `toa conceal` command

### 1: Environment variables

- Configuration values and secrets are mapped as environment variables to composition deployments
- Extensions may expose *deployment mutators*, which are able to modify deployment declaration
- Configuration context extension reads environment variables to resolve configuration and secrets

## Context

Component configuration is available as a context extension

Usage:

```javascript
// underlay
context.configiuration.foo
// invoke
context.configuration('foo')
```

## Secrets deployment

<dl>
<dt><code>toa conceal</code></dt>
<dd>Finds all secrets declared in a context, prompts values for those which hasn't been deployed yet and 
deploys those keys with provided values.

<code>--reset</code> don't skip deployed secrets</dd>
<dt><code>toa conceal key value</code></dt>
<dd>Checks if a given <code>key</code> is a declared secret and deploys it with a given <code>value</code></dd>
</dl>


