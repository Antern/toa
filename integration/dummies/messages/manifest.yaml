domain: messages
name: messages

entity:
  schema:
    dynamicDefaults:
      timestamp: timestamp
    properties:
      sender: string
      text: string
      timestamp: integer

remotes: [credits.balance]

operations:
  - name: add
    input:
      properties:
        sender: ~
        text: ~
      required: [sender, text]
    output:
      properties:
        id: ~
      required: [id]
  - name: get
    output:
      properties:
        id: ~
        text: ~
        timestamp: ~
      required: [id, text]
  - name: update
    input:
      properties:
        text: ~
      required: [text]
  - name: find
    output:
      properties:
        messages: array
